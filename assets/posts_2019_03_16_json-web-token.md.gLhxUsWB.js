import{_ as a,o as e,c as s,a as i}from"./chunks/framework.heUNgYAJ.js";const g=JSON.parse('{"title":"Json Web Token","description":"","frontmatter":{"title":"Json Web Token","date":"2019-03-16T11:37:11.000Z","categories":["Computer Science"],"tags":["Authorization","JWT"]},"headers":[{"level":1,"title":"Json Web Token","slug":"json-web-token","link":"#json-web-token","children":[{"level":2,"title":"结构","slug":"结构","link":"#结构","children":[{"level":3,"title":"Header","slug":"header","link":"#header","children":[]},{"level":3,"title":"Payload","slug":"payload","link":"#payload","children":[]},{"level":3,"title":"Signature","slug":"signature","link":"#signature","children":[]},{"level":3,"title":"HTTP Header","slug":"http-header","link":"#http-header","children":[]}]},{"level":2,"title":"优点","slug":"优点","link":"#优点","children":[]},{"level":2,"title":"缺点","slug":"缺点","link":"#缺点","children":[]},{"level":2,"title":"应用","slug":"应用","link":"#应用","children":[]}]}],"relativePath":"posts/2019/03/16/json-web-token.md","filePath":"posts/2019/03/16/json-web-token.md"}'),t={name:"posts/2019/03/16/json-web-token.md"},l=i(`<h1 id="json-web-token" tabindex="-1">Json Web Token <a class="header-anchor" href="#json-web-token" aria-label="Permalink to &quot;Json Web Token&quot;">​</a></h1><p><strong>主要用途</strong> 身份认证, 签名数据, 可以防止被篡改, 但不能储存未加密数据</p><p><strong>同类技术</strong> session 复制, session 持久化</p><p><a href="https://jwt.io/" target="_blank" rel="noreferrer">Auth0</a></p><p><a href="https://tools.ietf.org/html/rfc7519" target="_blank" rel="noreferrer">RFC 7519</a></p><h2 id="结构" tabindex="-1">结构 <a class="header-anchor" href="#结构" aria-label="Permalink to &quot;结构&quot;">​</a></h2><p>Header.Playload.Signature</p><h3 id="header" tabindex="-1">Header <a class="header-anchor" href="#header" aria-label="Permalink to &quot;Header&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;alg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;HS256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;typ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;JWT&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="payload" tabindex="-1">Payload <a class="header-anchor" href="#payload" aria-label="Permalink to &quot;Payload&quot;">​</a></h3><p><a href="https://www.iana.org/assignments/jwt/jwt.xhtml" target="_blank" rel="noreferrer">https://www.iana.org/assignments/jwt/jwt.xhtml</a></p><h3 id="signature" tabindex="-1">Signature <a class="header-anchor" href="#signature" aria-label="Permalink to &quot;Signature&quot;">​</a></h3><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HMACSHA256</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  base64UrlEncode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(header) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;.&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> base64UrlEncode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(payload),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  your </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 256</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secret</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="http-header" tabindex="-1">HTTP Header <a class="header-anchor" href="#http-header" aria-label="Permalink to &quot;HTTP Header&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>Authorization: Bearer &lt;token&gt;</span></span></code></pre></div><h2 id="优点" tabindex="-1">优点 <a class="header-anchor" href="#优点" aria-label="Permalink to &quot;优点&quot;">​</a></h2><ul><li>自包含: 降低数据库请求次数</li><li>不用担心 CORS</li><li>服务器无状态，易横向扩展</li></ul><h2 id="缺点" tabindex="-1">缺点 <a class="header-anchor" href="#缺点" aria-label="Permalink to &quot;缺点&quot;">​</a></h2><ul><li><p>包含认证信息，因此一旦信息泄露，任何人都可以获得令牌的所有权限</p><ul><li>有效期不宜太长</li><li>重要操作时应验证身份</li><li>HTTPS</li></ul></li><li><p>服务器无状态，无法撤销令牌</p></li><li><p>签名数据可以防止篡改，但不能储存未加密数据</p></li></ul><h2 id="应用" tabindex="-1">应用 <a class="header-anchor" href="#应用" aria-label="Permalink to &quot;应用&quot;">​</a></h2><ul><li>OAuth2.0 的 Authorization Code</li><li>信息传输，用于检验信息是否被篡改</li><li>登录状态保持</li><li>OpenID Connect</li></ul><p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-with-identity-providers.html" target="_blank" rel="noreferrer">Using Tokens with User Pools</a></p><p><a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-token-and-claims" target="_blank" rel="noreferrer">Microsoft identity platform ID tokens</a></p><p><a href="https://auth0.com/docs/tokens" target="_blank" rel="noreferrer">Tokens used by Auth0</a></p>`,24),n=[l];function r(h,o,p,d,k,c){return e(),s("div",null,n)}const E=a(t,[["render",r]]);export{g as __pageData,E as default};
